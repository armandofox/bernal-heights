<h1>New Hotspot Form - Part 1</h1>

%h1 Create New Hotspot (Report)

= form_for @hotspot, :url => wizard_path, :method => :put do |hotspot|
  
  Type of Issue: 
  - @all_issues.each do |issue|
    = issue
    = check_box_tag "issues[#{issue}]", 1, false, :id => "issues_#{issue}"
    
  = hotspot.label :location, "Location"
  = hotspot.text_area 'location', :value => params[:location]
  = hotspot.button 'Use my current location', :type => 'button', :onclick => 'getLocation()'
  = hotspot.label "(if location services is turned on)"
  
  = hotspot.label :occurred_time, "Discovery Time"
  = hotspot.time_select 'occurred_time', ampm: true
  
  = hotspot.label :occurred_date, "Discovery Date"
  = hotspot.date_select 'occurred_date'

  = hotspot.label :details, "Details"
  = hotspot.text_area 'details'
  
  = hotspot.label :report_num, "Police report number (if applicable)"
  = hotspot.number_field 'report_num'
  
  = hotspot.submit 'Next', :class => 'btn btn-primary'
  
= link_to 'skip', next_wizard_path

:javascript
  var x = document.getElementById("hotspot_location");
  
  function getLocation() {
      if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
      } else { 
          x.innerHTML = "Geolocation is not supported by this browser.";
      }
  }
  
  function showPosition(position) {
      x.innerHTML = position.coords.latitude + 
      ", " + position.coords.longitude;	
  }